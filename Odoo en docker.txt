Crear las instancias de docker:
    Mac con M1:
        Crear la instancia de odoo:
            docker pull odoo:13 --platform linux/amd64
        Crear la instancia de postgres:
            docker run -d -e POSTGRES_USER=odoo -e POSTGRES_PASSWORD=odoo -e POSTGRES_DB=postgres --name db postgres:10
        Luego se lanzan ambas imagenes, pero la de odoo con el mapeo de custom addons y el link a  la base de datos
            docker run -v /Users/markingsc/Documents/Proyectos/Traficante/F2/Desarrollo/Repo/Traficante-v2:/mnt/extra-addons -p 8069:8069 --name odoo --link db:db -t odoo:13 


Para entar a la consola de la instancia de Odoo desde cmd con usuario odoo:
docker exec -it odoo bash 

Entrar a la consola de la instancia de Odoo desde cml como root:
docker exec -tiu root odoo bash
docker exec -tiu <usuario> <instancia> bash

Desde git bash se usa antes winpty  
winpty docker exec -tiu <usuario> <instancia> bash

Para iniciar una instancia de docker
docker start odoo

Actualizar una aplicación:
    en docker
        odoo -p 8070 --db_host=172.17.0.2 --db_user=odoo --db_password=odoo -d traficante-dev -u partner_traficante
        odoo -p (un puerto diferente al 8069) --db_host=<host de la base> --db_user=<usuario de la base> --db_password=<pass de la base> -d <base de odoo> -u <modulo>

    En el server
        ./odoo-bin -c /etc/odoo13.conf -p 8070 -d traficante-prod-f2e1 -u cfdi_traficante



Instalar una aplicación:
odoo -p 8070 --db_host=172.17.0.2 --db_user=odoo --db_password=odoo -d traficante-dev -u stock_account_traficante


Para ver los logs:
    docker logs -f -n 1000 odoo

Para conectarse a la base de postgres:
    docker exec -it db bash 
    su postgres
    psql -U odoo -W odoo -d postgres
    \c traficante-dev-f2e1
    (a partir de aqui ya se pueden hacer consultas)

    Para obtener las constraints de una tabla
    \d+ {SCHEMA_NAME.TABLE_NAME}



Para obtener un backup de la base desde cli:
    Acceder al servidor con el usuario postgres
    Entrar a la carpeta /tmp
    pg_dump -E UTF-8 -p 5432 -F p -b -f backup.sql traficante-prod-f2e1
    gzip backup.sql

Luego se puede descargar con 
    scp -i odoo-prod.pem ubuntu@44.225.202.30:/tmp/backup.sql.gz /Users/markingsc/Documents


Ver el espacio que ocupan los archivos en el directorio actual:
du - sh *

Ver el espacio que ocupan los archivos en root:
df -H

Instalar un locale o idioma
Estando en root:
    apt-get install -y locales locales-all
    dpkg-reconfigure locales
        Introducir el ID del idioma a Instalar
        
Eliminar los logs de journal
sudo su -
journalctl --rotate
journalctl --vacuum-size=5M

Establecer limite para los logs del journal
nano /etc/systemd/journald.conf
SystemMaxUse=10M

Eliminar los logs de syslog
sudo su -
> /var/log/syslog

echo "" > /var/log/kern.log
echo "" > /var/log/syslog
service syslog restart
journalctl --vacuum-size=50M

Establecer limite para los logs de syslog
nano /etc/logrotate.d/rsyslog