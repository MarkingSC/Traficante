<?xml version="1.0"?>
<odoo>
    <data>
        <!-- INHERIT view_partner_form -->
        <record id="view_partner_form_cfdi_traficante" model="ir.ui.view">
            <field name="name">res.partner.form.cfdi.traficante.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="cdfi_invoice.view_partner_form" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='uso_cfdi']" position="attributes">
                    <attribute name="attrs">{'required' : [('customer_type', '=', 'A'), ('parent_id', '=', False)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='uso_cfdi']" position="after">
                    <field name="methodo_pago" attrs="{'required' : [('customer_type', '=', 'A'), ('parent_id', '=', False)]}"/>
                    <field name="forma_pago_pue" attrs="{'required' : [('customer_type', '=', 'A'), ('methodo_pago', '=', 'PUE'), ('parent_id', '=', False)], 'invisible' : [('methodo_pago', '!=', 'PUE')]}"/>
                    <field name="forma_pago_ppd" attrs="{'required' : [('customer_type', '=', 'A'), ('methodo_pago', '=', 'PPD'), ('parent_id', '=', False)], 'invisible' : [('methodo_pago', '!=', 'PPD')]}"/>
                    <field name="forma_pago" attrs="{'invisible' : True}"/>
                </xpath>
                <xpath expr="//div[@class='alert alert-warning oe_edit_only'][1]" position="replace">
                    <div class="alert alert-warning oe_edit_only" role="alert" attrs="{'invisible': [('same_vat_partner_id', '=', False)]}">
                        Ya existe un registro con el mismo <span>
                        <span class="o_vat_label">RFC</span>
                    </span> (                    <field name="same_vat_partner_id"/>
).
                </div>
            </xpath>
        </field>
    </record>
</data>
</odoo>