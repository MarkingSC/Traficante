<odoo>
    <data>
        <record model="ir.ui.view" id="product_template_form_view_traficante_inherit">
            <field name="inherit_id" ref="product.product_template_form_view"></field>
            <field name="model">product.template</field>
            <field name="arch" type="xml">
                <xpath expr="//group[@name='sale']/.." position="attributes">
                    <attribute name="groups">sales_team.group_sale_salesman,account.group_account_invoice</attribute>
                </xpath>
                <xpath expr="//group[@name='purchase']/.." position="attributes">
                    <attribute name="groups">purchase.group_purchase_user,account.group_account_invoice</attribute>
                </xpath>
                <xpath expr="//field[@name='standard_price']/.." position="attributes">
                    <attribute name="groups">purchase.group_purchase_user,account.group_account_invoice</attribute>
                </xpath>
                <xpath expr="//label[@for='standard_price']" position="attributes">
                    <attribute name="groups">purchase.group_purchase_user,account.group_account_invoice</attribute>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="product_template_form_view_procurement_button_no_putaway">
            <field name="inherit_id" ref="stock.product_template_form_view_procurement_button"></field>
            <field name="model">product.template</field>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_view_related_putaway_rules']" position="attributes">
                    <attribute name="groups">base.group_no_one</attribute>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="product_template_form_view_traficante_invoiceable">
            <field name="inherit_id" ref="stock.product_template_form_view_procurement_button"></field>
            <field name="model">product.template</field>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_open_quants']" position="replace">
                </xpath>
                <xpath expr="//button[@name='action_product_tmpl_forecast_report']" position="replace">
                    <button type="object" name="action_open_quants" attrs="{'invisible':[('type', '!=', 'product')]}" class="oe_stat_button" icon="fa-cubes">
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_value" widget="statinfo">
                                <field name="qty_invoiceable" widget="statinfo" nolabel="1" class="mr4"/>
                                <field name="uom_name"/>
                            </span>
                            <span class="o_stat_text">Facturables</span>
                        </div>
                    </button>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="product_template_kanban_view_traficante_invoiceable">
            <field name="inherit_id" ref="stock.product_template_kanban_stock_view"></field>
            <field name="model">product.template</field>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='qty_available']/.." position="replace">
                    <li t-if="record.type.raw_value == 'product'">Facturables: <field name="qty_invoiceable"/> <field name="uom_id"/></li>
                </xpath>
            </field>
        </record>

        <!-- Modificación de la accion para crear productos para que se establezca la compañía por defecto-->
        <record model="ir.actions.act_window" id="stock.product_template_action_product">
            <field name="context">{"search_default_consumable": 1, 'default_type': 'product', 'quantity_available_locations_domain': ('internal',),'default_company_id': allowed_company_ids[0]}</field>
        </record>
        <record model="ir.actions.act_window" id="sale.product_template_action">
            <field name="context">{"search_default_filter_to_sell":1, "sale_multi_pricelist_product_template": 1, 'default_company_id': allowed_company_ids[0]}</field>
        </record>
    </data>
</odoo>